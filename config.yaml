# =============================================================================
# Marketing Mix RL - Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# PATHS
# -----------------------------------------------------------------------------
paths:
  raw_data: "data/raw"
  models: "models"
  outputs: "outputs"

# -----------------------------------------------------------------------------
# DATA FILES (place in data/raw/)
# -----------------------------------------------------------------------------
files:
  main_data: "SecondFile.csv"
  special_sales: "SpecialSale.csv"

# -----------------------------------------------------------------------------
# CHANNEL NAMES (must match columns in your data)
# -----------------------------------------------------------------------------
channels:
  - TV
  - Digital
  - Sponsorship
  - Content.Marketing
  - Online.marketing
  - Affiliates
  - SEM
  - Radio
  - Other

# Target variable column name
target: "total_gmv"

# -----------------------------------------------------------------------------
# STATE SPACE CONFIGURATION
# Enable/disable dimensions and set bin counts
# More dimensions = larger state space = needs more training episodes
# -----------------------------------------------------------------------------
state:
  # Temporal
  month_index:
    enabled: true
    bins: 12
    description: "Month of year (0-11)"
  
  quarter:
    enabled: false
    bins: 4
    description: "Quarter (0-3)"
  
  # Budget
  budget_level:
    enabled: true
    bins: 5
    method: "quantile"
    description: "Budget quintile from historical data"
  
  budget_change:
    enabled: false
    bins: 3
    thresholds: [-0.1, 0.1]
    description: "MoM budget change direction"
  
  # Performance
  nps_level:
    enabled: true
    bins: 3
    thresholds: [45, 52]
    description: "NPS score buckets"
  
  revenue_trend:
    enabled: true
    bins: 3
    thresholds: [-0.05, 0.05]
    description: "Recent revenue trend direction"
  
  roas_level:
    enabled: false
    bins: 3
    method: "quantile"
    description: "Return on ad spend level"
  
  # Promotion
  has_promotion:
    enabled: true
    bins: 2
    description: "Whether month has special sale"

# -----------------------------------------------------------------------------
# ACTION SPACE CONFIGURATION
# Actions are DISCOVERED from data, not hardcoded
# -----------------------------------------------------------------------------
actions:
  # Number of clusters to find in historical allocations
  n_clusters: 8
  
  # Additional generated actions
  add_balanced: true              # Equal distribution across channels
  add_roi_proportional: true      # Weighted by MMM coefficients
  add_top_n_concentrated:         # Heavy allocation to top N channels
    - 1
    - 3
    - 5

# -----------------------------------------------------------------------------
# MMM (Marketing Mix Model) CONFIGURATION
# -----------------------------------------------------------------------------
mmm:
  # Adstock: carryover effect of advertising
  adstock:
    enabled: true
    decay_range: [0.1, 0.9]
    decay_steps: 5
  
  # Saturation: diminishing returns
  saturation:
    enabled: true
    method: "hill"    # "hill" or "exponential"
  
  # Model
  model_type: "ridge"
  alpha: 1.0
  
  # Validation
  test_size: 0.2

# -----------------------------------------------------------------------------
# RL (Reinforcement Learning) CONFIGURATION
# -----------------------------------------------------------------------------
rl:
  # Q-Learning (Value-Based)
  q_learning:
    alpha: 0.1              # Learning rate
    gamma: 0.0              # Discount factor (0 = bandit, >0 = MDP)
    epsilon_start: 1.0      # Initial exploration rate
    epsilon_end: 0.01       # Final exploration rate
    epsilon_decay: 0.9995   # Decay per episode
    episodes: 30000         # Training episodes
  
  # UCB Bandit (Exploration Strategy)
  ucb:
    c: 1.5                  # Exploration constant
    episodes: 30000         # Training episodes
  
  # Reward configuration
  reward:
    objective: "revenue"    # "revenue", "roas", or "profit"
    scale: 1e6              # Divide reward by this for stability
    constraint_penalty: 100 # Penalty for violating constraints

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
api:
  host: "0.0.0.0"
  port: 8000
  reload: true